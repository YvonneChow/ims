$(document).ready(function(){var t=1e3,a=580,e=20,n=80,r=80,o=d3.select("div#svg").append("svg").attr("width",t).attr("height",a);d3.tsv("data/localDENovartis_Apps_Compliance-20_Categories_Percent.txt",function(i,l){var c=1,s=d3.scale.linear().domain([0,c]).rangeRound([0,t-r]),p=d3.scale.linear().domain([0,c]).rangeRound([0,t-r]),d=d3.scale.ordinal().domain(l.map(function(t){return t["Market Segments"].toLowerCase()})).rangePoints([0,a-n-e],1),u=d3.svg.axis().scale(d).orient("left");o.append("g").attr("class","axis yaxis").attr("transform","translate("+r+","+n+")").transition().duration(500).call(u);var m=o.selectAll("body").data(l).enter().append("g").attr("class","item");m.append("rect").attr("class","low_compliance").attr("width",0).transition().duration(250).ease("swing").delay(function(t,a){return 50*a}).attr("x",function(t,a){return r}).attr("y",function(t,r){return(a-e-n)/l.length*r+n}).attr("height",a/l.length-e).attr("width",function(t,a){return s(t["low compliance"])}),m.append("rect").attr("class","fair_compliance").attr("width",0).transition().duration(250).ease("swing").delay(function(t,a){return 250+50*a}).attr("x",function(t,a){return r+s(t["low compliance"])}).attr("y",function(t,r){return(a-e-n)/l.length*r+n}).attr("height",a/l.length-e).attr("width",function(t,a){return s(t["fair compliance"])}),m.append("rect").attr("class","over_compliance").attr("width",0).transition().duration(250).ease("swing").delay(function(t,a){return 500+50*a}).attr("x",function(t,a){return r+s(t["low compliance"])+s(t["fair compliance"])}).attr("y",function(t,r){return(a-e-n)/l.length*r+n}).attr("height",a/l.length-e).attr("width",function(t,a){return s(t["over compliance"])});var f=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);m.on("mouseover",function(t){var a="<table><tbody><tr><td><span class='color low_compliance'></span><span>low compliance</span></td><td class='value'>"+(100*Number(t["low compliance"])).toFixed(1)+"%</td></tr><tr><td><span class='color fair_compliance'></span><span>fair compliance</span></td><td class='value'>"+(100*Number(t["fair compliance"])).toFixed(1)+"%</td></tr><tr><td><span class='color over_compliance'></span><span>over compliance</span></td><td class='value'>"+(100*Number(t["over compliance"])).toFixed(1)+"%</td></tr></tbody></table>";f.html(a).style("left",d3.event.pageX+20+"px").style("top",d3.event.pageY+"px").style("opacity",1)}).on("mousemove",function(t){f.style("left",d3.event.pageX+20+"px").style("top",d3.event.pageY+"px")}).on("mouseout",function(t){f.style("opacity",0)})}),$.ajax({url:"data/localDENovartis_Apps_Compliance-20_Categories_Percent.txt",success:function(t){for(var a="",e=t.split("\n"),n=0;n<e.length;n++){var r=e[n].split("	");if(0==n){for(var o=0;o<r.length;o++)a=a+"<th>"+r[o]+"</th>";$("table thead").append("<tr>"+a+"</tr>")}else{for(var o=0;o<r.length;o++)a=a+"<td>"+r[o]+"</td>";$("table tbody").append("<tr>"+a+"</tr>")}a=""}}})});